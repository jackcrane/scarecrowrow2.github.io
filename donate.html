<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scarecrow Row Cincinnati | About</title>
  <link rel="stylesheet" href="assets/about.css">
  <link rel="stylesheet" href="assets/donate.css">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Scarecrow Row Cincinnati | About">
  <meta property="og:description" content="A community art exhibition at Armleder Park.">
  <meta property="og:image" content="https://scarecrowrow.org/assets/images/favicon_clear.png">
  <meta property="og:site_name" content="Scarecrow Row">
  <meta name="twitter:image:alt" content="Cincinnati Scarecrow Row">
  <meta name="title" content="Scarecrow Row Cincinnati">
  <meta name="description" content="A community art installation in Cincinnati Ohio.">
  <meta name="keywords"
    content="scarecrow,scarecrow row,cincinnati,scarecrow row cincinnati, fall activities, fall,activities,armleder">
  <meta name="robots" content="index, follow">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="language" content="English">
  <meta name="revisit-after" content="15 days">
  <meta name="author" content="Scarecrow Row Cincinnati">
<body>
  <header class="hero">
    <div class="hero--content">
      <a href="/" class="reset"><h1>Scarecrow Row</h1></a>
      <h2>Donate</h2>
    </div>
  </header>
  <article>
    <h2>Enter how much you wish to donate, then click continue</h2>
    <form onload="(e) => {e.target.preventDefault()}" class="donation-collection-form">
      <p class="donation-amount">$<input type="number" value="50" size="4"></p>
      <input class="slider" type="range" min="0" max="500" value="50">
      <a onclick="javascript:submitDonation()" id="submitbtn" class="btn sketched d-centered">Submit</a>
    </form>
  </article>
  <footer>
    <p href="/" class="footer-item"><a href="#" class="reset">Scarecrow Row Home</a></p>
    <p href="/" class="footer-item"><a href="#" class="reset">Contact us</a></p>
    <p href="/" class="footer-item"><a href="#" class="reset">Media</a></p>
    <p href="/" class="footer-item"><a href="#" class="reset">Website built by Jack Crane</a></p>
  </footer>
</body>
<script>
  window.addEventListener('scroll', (evt) => {
    if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
      document.querySelector('.hero--content').classList.add('scrolled');
    } else {
      document.querySelector(".hero--content").classList.remove('scrolled');
    }
  })

  document.querySelector('input.slider').addEventListener('input', (evt) => {
    document.querySelector('.donation-amount').querySelector('input').value = `${evt.target.value}`
    console.log(evt.target.value)
  })

  function submitDonation () {
    const value = document.querySelector('.donation-amount').querySelector('input').value
    console.log(`Generating a donation link for ${value}`)
    if(value != '' && value != 0.99) {
        document.querySelector('#submitbtn').value = 'Loading...'
        
        let myHeaders = new Headers();
        myHeaders.append("Content-Type", "application/json");

        let raw = JSON.stringify({"amount":value});

        let requestOptions = {
          method: 'POST',
          headers: myHeaders,
          body: raw,
          redirect: 'follow'
        };

        fetch("https://api.scarecrowrow.org/generate-payment-link", requestOptions)
          .then(response => response.text())
          .then(result => document.location.href = (result))
          .catch(error => console.log('error', error));
      } else {
        alert('Please set an amount more than $0.99')
      }
  }
</script>
</html>